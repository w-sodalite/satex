server:
  host: 0.0.0.0
  port: 8080

router:
  global:
    layers:
      - Trace
  routes:
    - id: crates.io
      matchers:
        - Method=GET
        - Path=/crates/{*ignore}
      layers:
        - StripPrefix=1
        - ConcurrencyLimit=5
      service:
        kind: Proxy
        args:
          uri: https://crates.io
          client:
            set_host: false

    - id: serve-dir
      matchers:
        - Method=GET
        - Path=/static/{*ignore}
      layers:
        - StripPrefix=1
      service: ServeDir=./src

    - id: status-code
      matchers:
        - Method=GET
        - Path=/status/{*ignore}
      layers:
        - StripPrefix=1
      service: StatusCode=503